# AWS CI/CD MCP Server

> ## ⚠️ IMPORTANT: YOU ARE RESPONSIBLE FOR YOUR AGENTS
>
> You are solely responsible for the actions and permissions of agents using the MCP server.
>
> - By default, the MCP server operates in **read-only mode**.
> - To enable write access, you must **explicitly configure the MCP with the necessary IAM permissions** and set `CICD_READ_ONLY_MODE=false` to enable create, update, and delete operations on CI/CD resources.
> - Always follow the **principle of least privilege**—grant only the permissions necessary for the agent to function.
> - If enabling write operations, **we recommend you take a backup of your configurations** and carefully validate any instructions generated by your LLM before execution.
> - With AWS CI/CD MCP Server, we recommend exercising caution when integrating it into automated workflows.
>
> Misconfigured permissions or unverified agent actions may result in **pipeline failures, build errors, deployment issues, or unexpected LLM behavior**.

An AWS Labs Model Context Protocol (MCP) server for AWS CI/CD services that enables AI assistants to interact with CodePipeline, CodeBuild, and CodeDeploy.

## Overview

The AWS CI/CD MCP Server simplifies the management of continuous integration and deployment workflows by providing comprehensive capabilities across AWS's core CI/CD services. It enables streamlined pipeline management, build automation, and deployment orchestration with AWS authorized defaults and security best practices.

## Features

- **CodePipeline Management**: Create, update, and manage CI/CD pipelines with execution control and monitoring capabilities.
- **CodeBuild Operations**: Manage build projects, execute builds, and access comprehensive build logs and status information.
- **CodeDeploy Integration**: Handle application deployments, manage deployment groups, and monitor deployment status across different compute platforms.
- **AWS Authorized Defaults**: Automatically applies AWS best practices and latest recommended configurations when creating resources.
- **Security Best Practices**: Built-in security controls with read-only mode by default and comprehensive input validation.
- **Multi-Platform Support**: Supports Server, Lambda, and ECS deployment platforms with appropriate configuration defaults.
- **Comprehensive Monitoring**: Access detailed execution history, build logs, and deployment status across all services.
- **Error Handling**: Robust error handling with detailed logging and structured error responses.

## Prerequisites

1. Install `uv` from [Astral](https://docs.astral.sh/uv/getting-started/installation/) or the [GitHub README](https://github.com/astral-sh/uv#installation)
2. Install Python using `uv python install 3.10`
3. Set up AWS credentials with access to AWS CI/CD services
   - You need an AWS account with appropriate permissions for CodePipeline, CodeBuild, and CodeDeploy
   - Configure AWS credentials with `aws configure` or environment variables

## Setup

### Installation

| Cursor | VS Code |
|:------:|:-------:|
| [![Install MCP Server](https://cursor.com/deeplink/mcp-install-light.svg)](https://cursor.com/en/install-mcp?name=awslabs.aws-cicd-mcp-server&config=eyJjb21tYW5kIjoidXZ4IGF3c2xhYnMuYXdzLWNpY2QtbWNwLXNlcnZlckBsYXRlc3QiLCJlbnYiOnsiQVdTX1BST0ZJTEUiOiJ5b3VyLWF3cy1wcm9maWxlIiwiQVdTX1JFR0lPTiI6InVzLWVhc3QtMSIsIkZBU1RNQ1BfTE9HX0xFVkVMIjoiRVJST1IifX0%3D) | [![Install on VS Code](https://img.shields.io/badge/Install_on-VS_Code-FF9900?style=flat-square&logo=visualstudiocode&logoColor=white)](https://insiders.vscode.dev/redirect/mcp/install?name=AWS%20CI/CD%20MCP%20Server&config=%7B%22command%22%3A%22uvx%22%2C%22args%22%3A%5B%22awslabs.aws-cicd-mcp-server%40latest%22%5D%2C%22env%22%3A%7B%22AWS_PROFILE%22%3A%22your-aws-profile%22%2C%22AWS_REGION%22%3A%22us-east-1%22%2C%22FASTMCP_LOG_LEVEL%22%3A%22ERROR%22%7D%7D) |

### Amazon Q Developer CLI

Configure the MCP server in your Amazon Q Developer CLI configuration (`~/.aws/amazonq/mcp.json`):

```json
{
  "mcpServers": {
    "awslabs.aws-cicd-mcp-server": {
      "command": "uvx",
      "args": ["awslabs.aws-cicd-mcp-server@latest"],
      "env": {
        "AWS_PROFILE": "your-aws-profile",
        "AWS_REGION": "us-east-1",
        "FASTMCP_LOG_LEVEL": "ERROR"
      }
    }
  }
}
```

### Other MCP Clients

Configure the MCP server in your MCP client configuration (e.g., for other MCP clients, edit their respective configuration files):

```json
{
  "mcpServers": {
    "awslabs.aws-cicd-mcp-server": {
      "command": "uvx",
      "args": ["awslabs.aws-cicd-mcp-server@latest"],
      "env": {
        "AWS_PROFILE": "your-aws-profile",
        "AWS_REGION": "us-east-1",
        "FASTMCP_LOG_LEVEL": "ERROR"
      }
    }
  }
}
```

### Docker Installation

or docker after a successful `docker build -t awslabs/aws-cicd-mcp-server .`:

```file
# fictitious `.env` file with AWS temporary credentials
AWS_ACCESS_KEY_ID=<from the profile you set up>
AWS_SECRET_ACCESS_KEY=<from the profile you set up>
AWS_SESSION_TOKEN=<from the profile you set up>
```

```json
{
  "mcpServers": {
    "awslabs.aws-cicd-mcp-server": {
      "command": "docker",
      "args": [
        "run",
        "--rm",
        "--interactive",
        "--env-file",
        "/full/path/to/file/above/.env",
        "awslabs/aws-cicd-mcp-server:latest"
      ],
      "env": {},
      "disabled": false,
      "autoApprove": []
    }
  }
}
```

## Server Configuration Options

The AWS CI/CD MCP Server supports several environment variables that can be used to configure its behavior:

### `CICD_READ_ONLY_MODE`

Controls whether the server allows write operations. When set to `true` (default), the server runs in read-only mode that only allows read operations. This enhances security by preventing any modifications to CI/CD resources. In read-only mode:

- Read operations (`list_pipelines`, `get_project_details`, `get_deployment_status`) work normally
- Write operations (`create_pipeline`, `start_build`, `create_deployment`, etc.) are blocked and return a permission error

This mode is particularly useful for:
- Demonstration environments
- Security-sensitive applications
- Integration with public-facing AI assistants
- Protecting production CI/CD resources from unintended modifications

To enable write operations, set `CICD_READ_ONLY_MODE=false`:

```json
{
  "mcpServers": {
    "awslabs.aws-cicd-mcp-server": {
      "command": "uvx",
      "args": ["awslabs.aws-cicd-mcp-server@latest"],
      "env": {
        "AWS_PROFILE": "your-aws-profile",
        "AWS_REGION": "us-east-1",
        "CICD_READ_ONLY_MODE": "false",
        "FASTMCP_LOG_LEVEL": "ERROR"
      }
    }
  }
}
```

### `FASTMCP_LOG_LEVEL`

Specifies the logging level for the server. Available levels are:
- `DEBUG`: Detailed debugging information
- `INFO`: General information messages (default)
- `WARNING`: Warning messages only
- `ERROR`: Error messages only

Example:
```json
{
  "env": {
    "FASTMCP_LOG_LEVEL": "DEBUG"
  }
}
```

## Usage Examples

| Prompt | Description |
|--------|-------------|
| `List all CodePipeline pipelines in us-west-2` | Retrieves all available CI/CD pipelines in the specified AWS region with their current status |
| `Show details for my-app-pipeline including execution history` | Gets comprehensive pipeline information including recent executions, stages, and configuration details |
| `Create a CodeBuild project for Node.js application with latest defaults` | Creates a new build project with AWS authorized defaults for Node.js, including latest AMI and security settings |
| `Start a build for my-web-app project` | Initiates a build execution for the specified CodeBuild project and returns build ID and status |
| `Get build logs for build ID abc123` | Retrieves detailed build logs and execution information for troubleshooting and monitoring |
| `List all CodeDeploy applications and their deployment groups` | Displays all deployment applications with their associated deployment groups for overview and management |
| `Create a deployment for my-app to production deployment group` | Initiates a new deployment with AWS best practices and monitoring capabilities |
| `Check deployment status for deployment ID def456` | Monitors deployment progress and provides detailed status information including any issues or failures |

## Available Tools

### CodePipeline Tools
- **list_pipelines**: List all pipelines in a region with basic information
- **get_pipeline_details**: Get comprehensive pipeline configuration and metadata
- **start_pipeline_execution**: Start pipeline execution (write mode required)
- **get_pipeline_execution_history**: Get detailed execution history and status
- **create_pipeline**: Create new pipeline with AWS authorized defaults (write mode required)
- **update_pipeline**: Update existing pipeline configuration (write mode required)
- **delete_pipeline**: Delete a pipeline (write mode required)

### CodeBuild Tools
- **list_projects**: List all CodeBuild projects with basic information
- **get_project_details**: Get detailed project configuration and settings
- **start_build**: Start a build execution (write mode required)
- **get_build_logs**: Get build logs and execution details
- **create_project**: Create new project with latest AWS defaults (write mode required)
- **update_project**: Update existing project configuration (write mode required)
- **delete_project**: Delete a project (write mode required)

### CodeDeploy Tools
- **list_applications**: List all CodeDeploy applications
- **get_application_details**: Get detailed application information and configuration
- **list_deployment_groups**: List deployment groups for a specific application
- **create_deployment**: Create new deployment with best practices (write mode required)
- **get_deployment_status**: Get detailed deployment status and progress
- **create_application**: Create new application (write mode required)
- **create_deployment_group**: Create deployment group with defaults (write mode required)
- **delete_application**: Delete an application (write mode required)

## AWS Authorized Defaults

The server automatically applies AWS best practices and latest configurations:

### CodeBuild Defaults
- **Environment Image**: `aws/codebuild/amazonlinux2-x86_64-standard:5.0` (latest)
- **Compute Type**: `BUILD_GENERAL1_SMALL` (cost-effective default)
- **Timeout**: 60 minutes with 8-hour queue timeout
- **Security**: Privileged mode disabled, private visibility
- **Logging**: CloudWatch Logs enabled by default

### CodePipeline Defaults
- **Pipeline Type**: V2 (latest version with enhanced features)
- **Execution Mode**: QUEUED (recommended for reliability)
- **Source**: CodeCommit with main branch, CODE_ZIP output format
- **Polling**: Disabled in favor of CloudWatch Events

### CodeDeploy Defaults
- **Deployment Config**: Platform-specific best practices
  - Server: `CodeDeployDefault.AllAtOneCodeDeploy`
  - Lambda: `CodeDeployDefault.LambdaCanary10Percent5Minutes`
  - ECS: `CodeDeployDefault.ECSAllAtOnceBlueGreen`
- **Auto Rollback**: Enabled with failure and alarm detection
- **Deployment Style**: IN_PLACE with traffic control options

## Security Considerations

When using this MCP server, consider:

- The MCP server needs permissions to access and manage AWS CI/CD resources
- Write operations are disabled by default for security
- Follow the principle of least privilege when setting up IAM permissions
- Use separate AWS profiles for different environments (dev, test, prod)
- Validate all generated configurations before applying to production

## Troubleshooting

- If you encounter permission errors, verify your IAM user has the correct policies for CodePipeline, CodeBuild, and CodeDeploy
- For connection issues, check network configurations and security groups
- For build failures, check build logs using the `get_build_logs` tool
- For deployment issues, monitor deployment status with `get_deployment_status`
- For general AWS CI/CD issues, consult the [AWS Developer Tools documentation](https://docs.aws.amazon.com/codepipeline/)
